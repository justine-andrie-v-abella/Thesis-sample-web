<script>
    // Mobile menu toggle
    document.getElementById('mobile-menu-button')?.addEventListener('click', function() {
        const menu = document.getElementById('mobile-menu');
        menu.classList.toggle('hidden');
    });

    document.getElementById('teacher-mobile-menu-button')?.addEventListener('click', function() {
        const menu = document.getElementById('teacher-mobile-menu');
        menu.classList.toggle('hidden');
    });

    // Modal functions
    function openModal() {
        document.getElementById('file-preview-modal').classList.remove('hidden');
    }

    function closeModal() {
        document.getElementById('file-preview-modal').classList.add('hidden');
    }

    function openConfirmationModal(title, message, confirmCallback) {
        document.getElementById('confirmation-title').textContent = title;
        document.getElementById('confirmation-message').textContent = message;
        document.getElementById('confirmation-modal').classList.remove('hidden');
        
        const confirmButton = document.getElementById('confirm-button');
        // Remove previous event listeners
        const newConfirmButton = confirmButton.cloneNode(true);
        confirmButton.parentNode.replaceChild(newConfirmButton, confirmButton);
        
        newConfirmButton.addEventListener('click', function() {
            confirmCallback();
            closeConfirmationModal();
        });
    }

    function closeConfirmationModal() {
        document.getElementById('confirmation-modal').classList.add('hidden');
    }

    // File upload preview
    document.getElementById('file-upload')?.addEventListener('change', function(e) {
        const fileName = e.target.files[0]?.name;
        if (fileName) {
            // You can add file preview logic here
            console.log('File selected:', fileName);
        }
    });

    // Close modals when clicking outside
    window.addEventListener('click', function(event) {
        const modal = document.getElementById('file-preview-modal');
        if (event.target === modal) {
            closeModal();
        }
        
        const confirmationModal = document.getElementById('confirmation-modal');
        if (event.target === confirmationModal) {
            closeConfirmationModal();
        }
    });

    // Example usage of confirmation modal
    function deleteFile(fileId) {
        openConfirmationModal(
            'Delete File',
            'Are you sure you want to delete this file? This action cannot be undone.',
            function() {
                // Perform delete action
                console.log('Deleting file with ID:', fileId);
                // Add your AJAX call or form submission here
            }
        );
    }
</script>